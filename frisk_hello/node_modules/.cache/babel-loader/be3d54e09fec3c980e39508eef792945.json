{"ast":null,"code":"import _classCallCheck from\"/home/osboxes/frisk_hello/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/osboxes/frisk_hello/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/osboxes/frisk_hello/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/osboxes/frisk_hello/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import logo from\"./logo.svg\";import'./App.css';import ReactDOM from'react-dom';import React from'react';import{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AppList=/*#__PURE__*/function(_React$Component){_inherits(AppList,_React$Component);var _super=_createSuper(AppList);function AppList(props){var _this;_classCallCheck(this,AppList);_this=_super.call(this,props);//following is just for testing the table rendering \n_this.getKeys=function(){console.log(this.props.data);return Object.keys(this.props.data[0]);};_this.getHeader=function(){var keys=this.getKeys();return keys.map(function(key,index){return/*#__PURE__*/_jsx(\"th\",{children:key.toUpperCase()},key);});};_this.getRowsData=function(){var items=this.props.data;var keys=this.getKeys();return items.map(function(row,index){return/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(RenderRow,{data:row,keys:keys},index)},index);});};var table_data={//state is by default an object\ndata:[{id:1,time_created:'2021-04-17T18:33:07.942Z',name:'Kalana',email:'pwkalana9@gmail.com',pin:'2334',message:'Congratulations, please join the party.'},{id:2,time_created:'2021-04-17T18:33:56.169Z',name:'Withanage',email:'pwkalana9@gmail.com',pin:'1234',message:'Hello, how are you?'},{id:3,time_created:'2021-04-17T18:34:38.570Z',name:'James',email:'james@gmail.com',pin:'0978',message:'I am at the bus stop, see you there.'}]};//Uncomment following to test table data rendering without API\n/*this.props.data = table_data.data;\n    this.getHeader = this.getHeader.bind(this);\n    this.getRowsData = this.getRowsData.bind(this);\n    this.getKeys = this.getKeys.bind(this);*/return _this;}_createClass(AppList,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;//When the component initializes, load the data from the APIs\nconsole.log(\"requesting\");fetch(\"http://localhost:3000/getmessages\",{\"method\":\"GET\",\"headers\":{\"content-type\":\"application/json\",\"accept\":\"application/json\"}}).then(function(response){return response.json();}).then(function(response){//store the messages into the state variable\n_this2.setState({messages:response});_this2.props.data=_this2.state.messages;_this2.getHeader=_this2.getHeader.bind(_this2);_this2.getRowsData=_this2.getRowsData.bind(_this2);_this2.getKeys=_this2.getKeys.bind(_this2);}).catch(function(err){console.log(err);});}//Get the keys for table rendering\n},{key:\"render\",value://Page rendering goes here\nfunction render(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"a\",{href:\"http://localhost:3000/exportcsv\",children:\"Download CSV\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:this.getHeader()})}),/*#__PURE__*/_jsx(\"tbody\",{children:this.getRowsData()})]})]});}}]);return AppList;}(React.Component);//Render each table row\nexport{AppList as default};var RenderRow=function RenderRow(props){return props.keys.map(function(key,index){return/*#__PURE__*/_jsx(\"td\",{children:props.data[key]},props.data[key]);});};","map":{"version":3,"sources":["/home/osboxes/frisk_hello/src/AppList.js"],"names":["ReactDOM","React","useState","useEffect","AppList","props","getKeys","console","log","data","Object","keys","getHeader","map","key","index","toUpperCase","getRowsData","items","row","table_data","id","time_created","name","email","pin","message","fetch","then","response","json","setState","messages","state","bind","catch","err","Component","RenderRow"],"mappings":"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","sourcesContent":["import logo from './logo.svg';\nimport './App.css';\nimport ReactDOM from 'react-dom'\nimport React from 'react';\nimport {useState, useEffect} from 'react';\n\nexport default class AppList extends React.Component {\n \n  constructor(props)\n  {\n    super(props);\n    //following is just for testing the table rendering \n    var table_data = { //state is by default an object\n        data : [\n          {\n            id: 1,\n            time_created: '2021-04-17T18:33:07.942Z',\n            name: 'Kalana',\n            email: 'pwkalana9@gmail.com',\n            pin: '2334',\n            message: 'Congratulations, please join the party.'\n          },\n          {\n            id: 2,\n            time_created: '2021-04-17T18:33:56.169Z',\n            name: 'Withanage',\n            email: 'pwkalana9@gmail.com',\n            pin: '1234',\n            message: 'Hello, how are you?'\n          },\n          {\n            id: 3,\n            time_created: '2021-04-17T18:34:38.570Z',\n            name: 'James',\n            email: 'james@gmail.com',\n            pin: '0978',\n            message: 'I am at the bus stop, see you there.'\n          }\n        ]    \n   }\n    //Uncomment following to test table data rendering without API\n    /*this.props.data = table_data.data;\n    this.getHeader = this.getHeader.bind(this);\n    this.getRowsData = this.getRowsData.bind(this);\n    this.getKeys = this.getKeys.bind(this);*/\n  }\n\n  componentDidMount() {\n      //When the component initializes, load the data from the APIs\n      console.log(\"requesting\");\n      fetch(\"http://localhost:3000/getmessages\", {\n        \"method\": \"GET\",\n        \"headers\": {\n          \"content-type\": \"application/json\",\n          \"accept\": \"application/json\"\n        }\n      })\n      .then(response => (response.json()))\n      .then(response => {\n        //store the messages into the state variable\n        this.setState({\n          messages: response\n        });\n        this.props.data = this.state.messages;\n        this.getHeader = this.getHeader.bind(this);\n        this.getRowsData = this.getRowsData.bind(this);\n        this.getKeys = this.getKeys.bind(this);\n      })\n      .catch(err => { console.log(err); \n      });\n  }\n  \n  //Get the keys for table rendering\n  getKeys = function()\n  {\n    console.log(this.props.data);\n    return Object.keys(this.props.data[0]);\n  }\n  \n  //Get the header names for table rendering\n  getHeader = function()\n  {\n    var keys = this.getKeys();\n    return keys.map((key, index)=>{\n    return <th key={key}>{key.toUpperCase()}</th>\n    })\n  }\n  \n  //Get the data for each row in the table\n  getRowsData = function()\n  {\n    var items = this.props.data;\n    var keys = this.getKeys();\n    return items.map((row, index)=>{\n    return <tr key={index}><RenderRow key={index} data={row} keys={keys}/></tr>\n    })\n  }\n  \n  //Page rendering goes here\n  render() \n  {\n    return (\n    <div>\n      <a href=\"http://localhost:3000/exportcsv\">Download CSV</a>\n      <table>\n        <thead>\n          <tr>{this.getHeader()}</tr>\n        </thead>\n        <tbody>\n          {this.getRowsData()}\n        </tbody>\n      </table>\n    </div>\n    );\n    }\n }\n \n //Render each table row\n const RenderRow = (props) =>{\n  return props.keys.map((key, index)=>{\n    return <td key={props.data[key]}>{props.data[key]}</td>\n    })\n }\n \n \n"]},"metadata":{},"sourceType":"module"}